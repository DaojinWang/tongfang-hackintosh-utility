sudo: required
os: osx
language: node_js
node_js:
- 12
cache:
  directories:
  - node_modules
  - "$HOME/.yarn-cache"
install:
- npm install -g yarn
- cd starbeat-core
- yarn install
- cd ../starbeat-client
- yarn install
- cd ..
script:
- bash ./build-mac.sh
- cd release
- zip -r -q Tongfang-Hackintosh-Utility-macOS.zip Tongfang\ Hackintosh\ Utility-darwin-x64/Tongfang\
  Hackintosh\ Utility.app
deploy:
  provider: releases
  api_key: dd73a33a862f0deb12e00015660b8aa2dd33f4b1
  file: "./release/Tongfang-Hackintosh-Utility-macOS.zip"
  on:
    tag: true
    all_branches: true
    repo: kirainmoe/tongfang-hackintosh-utility
